const defaultPGanancia=2,defaultPMantenimiento=2,defaultPPerdida=2.5,defaultGHombre=.8,defaultGMujer=1.2,defaultOCalorias=300;var pGanancia,pMantenimiento,pPerdida,gHombre,gMujer,oCalorias,rangePGanancia,rangePMantenimiento,rangePPerdida,rangeGHombre,rangeGMujer,rangeOCalorias,donut;function guardarConfiguracion(a){return a.preventDefault(),pGanancia=parseFloat($("#rangePGanancia").val()),pMantenimiento=parseFloat($("#rangePMantenimiento").val()),pPerdida=parseFloat($("#rangePPerdida").val()),gHombre=parseFloat($("#rangeGHombre").val()),gMujer=parseFloat($("#rangeGMujer").val()),oCalorias=parseInt($("#rangeOCalorias").val()),console.log("gr proteina por kilo de peso - Ganancia: "+pGanancia),console.log("gr proteina por kilo de peso - Mantenimiento: "+pMantenimiento),console.log("gr proteina por kilo de peso - Perdida: "+pPerdida),console.log("gr grasa por kilo de peso - Hombre: "+gHombre),console.log("gr grasa por kilo de peso - Mujeres: "+gMujer),console.log("Calorias para el objetivo: "+oCalorias),$("#modalConfig").modal("toggle"),!1}function inicializarParametros(){pGanancia=defaultPGanancia,pMantenimiento=defaultPMantenimiento,pPerdida=defaultPPerdida,gHombre=defaultGHombre,gMujer=defaultGMujer,oCalorias=defaultOCalorias}function inicializarRanges(){var a=$('input[type="range"]');a.each(function(){$(this).rangeslider({polyfill:!1})}),a.on("input",cambiarVistaRange)}function cambiarVistaRange(){let a,e=$(this).attr("id");a="rangeOCalorias"==e?" Cal":" gr / Kg de peso",document.getElementById(e+"Vista").innerHTML=$(this).val()+a}function resetConfig(){$("#rangePGanancia").val(defaultPGanancia),$("#rangePMantenimiento").val(defaultPMantenimiento),$("#rangePPerdida").val(defaultPPerdida),$("#rangeGHombre").val(defaultGHombre),$("#rangeGMujer").val(defaultGMujer),$("#rangeOCalorias").val(defaultOCalorias),document.getElementById("rangePGananciaVista").innerHTML=defaultPGanancia+" gr / Kg de peso",document.getElementById("rangePMantenimientoVista").innerHTML=defaultPMantenimiento+" gr / Kg de peso",document.getElementById("rangePPerdidaVista").innerHTML=defaultPPerdida+" gr / Kg de peso",document.getElementById("rangeGHombreVista").innerHTML=defaultGHombre+" gr / Kg de peso",document.getElementById("rangeGMujerVista").innerHTML=defaultGMujer+" gr / Kg de peso",document.getElementById("rangeOCaloriasVista").innerHTML=defaultOCalorias+" Cal"}function calcular(a){a.preventDefault();var e=$("input[name='genero']:checked").val(),n=parseInt($("#pesoKg").val()),t=parseInt($("#estaturaCm").val()),r=parseInt($("#edad").val()),o=$("input[name='ejercicio']:checked").val(),i=$("input[name='objetivo']:checked").val();return console.log("Genero: "+e+" Peso: "+n+" Estatura: "+t+" Edad: "+r+" Ejercicio: "+o+" Objetivo: "+i),$("#formulario").toggle(),$("#btnVolverCalculadora").toggle(),lanzarSpinner(n,t,r,e,o,i),!1}function generarCal(a,e,n,t,r,o){var i,l,d,u,g,s;$("#resultados").toggle();var c=calHarrisBennedict(a,e,n,t);console.log("Tasa Metab√≥lica Basal: "+c);var m,f=ingestaRecomendada(c,r);switch(console.log("Ingesta diaria recomendada: "+f),o){case"1":m=-1*oCalorias,i=a*pGanancia;break;case"3":m=oCalorias,i=a*pMantenimiento;break;default:m=0,i=a*pPerdida}var p=f+m;console.log("Ingesta para el objetivo: "+p),animateValue("tmb",Math.round(c)," Cal"),animateValue("recomendada",Math.round(f)," Cal"),animateValue("calObjetivo",Math.round(p)," Cal"),g=(s=p-(u=9*(d="mujer"==t?a*gMujer:a*gHombre))-(l=4*i))/4,animateValue("grProteinas",Math.round(i)," gr"),animateValue("calProteinas",Math.round(l)," Cal"),animateValue("grGrasas",Math.round(d)," gr"),animateValue("calGrasas",Math.round(u)," Cal"),animateValue("grHidratos",Math.round(g)," gr"),animateValue("calHidratos",Math.round(s)," Cal"),graficoDonut(i,d,g)}function lanzarSpinner(a,e,n,t,r,o){$("#modalSpinner").modal("toggle"),new Promise(function(a,e){setTimeout(function(){a("anything")},2e3)}).then(function(i){$("#modalSpinner").modal("toggle"),$("html, body").animate({scrollTop:2*$(document).outerHeight(!0)},2e3),generarCal(a,e,n,t,r,o)})}function graficoDonut(a,e,n){Chart.defaults.global.legend.labels.usePointStyle=!0;var t={type:"doughnut",data:{datasets:[{data:[Math.round(a),Math.round(e),Math.round(n)],backgroundColor:["rgb(228, 75, 96)","rgb(229, 190, 79)","rgb(25, 170, 158)"],label:"Dataset 1",borderColor:"#222"}],labels:["Proteinas","Grasas","Hidratos de carbono"]},options:{responsive:!0,maintainAspectRatio:!1,animation:{animateScale:!0,animateRotate:!0},legend:{position:"bottom",labels:{fontSize:20}}}},r=document.getElementById("chart-area").getContext("2d");resizeManager(),donut=new Chart(r,t)}function calHarrisBennedict(a,e,n,t){var r;return"mujer"===t?(console.log("Calculando Harris-Bennedict para mujer"),r=655.0955+9.5634*a+1.8449*e-4.6756*n):(console.log("Calculando Harris-Bennedict para hombre"),r=66.473+13.7516*a+5.0033*e-6.755*n),r}function ingestaRecomendada(a,e){var n;switch(e){case"2":n=1.375*a;break;case"3":n=1.55*a;break;case"4":n=1.725*a;break;case"5":n=1.9*a;break;default:n=1.2*a}return n}function detectRatio(){return $(window).width()<$(window).height()}function resizeManager(){detectRatio()?$("#chart-area").height($(window).width()):document.getElementById("chart-area").hasAttribute("height")&&$("#chart-area").removeAttr("height")}function animateValue(a,e,n){const t=1e3;var r=document.getElementById(a),o=e-0,i=Math.abs(Math.floor(t/o));i=Math.max(i,50);var l,d=(new Date).getTime()+t;function u(){var a=(new Date).getTime(),i=Math.max((d-a)/t,0),u=Math.round(e-i*o);r.innerHTML=u+n,u==e&&clearInterval(l)}l=setInterval(u,i),u()}$(document).ready(function(){inicializarRanges(),inicializarParametros(),resetConfig(),$("#btnRestablecer").click(function(a){a.preventDefault(),resetConfig()}),$("#btnVolverCalculadora").click(function(a){a.preventDefault(),$("#formulario").toggle(),$("#resultados").toggle(),$("#btnVolverCalculadora").toggle()}),$(window).on("resize",resizeManager),$("#formulario").submit(calcular),$("#formConfig").submit(guardarConfiguracion)});